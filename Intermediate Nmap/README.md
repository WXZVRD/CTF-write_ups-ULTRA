# TryHackMe — Intermediate Nmap

**Категория:** Networking / Nmap

**Цель задачи:**
С помощью Nmap исследовать машину, найти открытые сервисы, получить доступ к системе и найти файл `flag.txt`.

---

## Краткое резюме

В ходе разведки был обнаружен нестандартный порт с неизвестным сервисом (TCP 31337). С помощью `telnet` был получен баннер, содержащий учётные данные для SSH. Авторизовавшись по SSH, я перешёл в каталог `/usr/` и нашёл файл `flag.txt`.

> **Важно:** в write-up не публикуется сам флаг. Вместо этого указываю место и подтверждение: `FLAG_FOUND` (замени на SHA256 своего флага при публикации).

---

## Инструменты

* `nmap` — сканирование портов и сервисов
* `telnet`/`nc` — граббинг баннеров
* `ssh` — подключение к машине
* стандартные UNIX-инструменты: `ls`, `cat`, `find`

---

## Шаг 1 — Быстрая разведка (Nmap)

Сначала выполнил базовый скан для определения открытых портов и версий сервисов:

```bash
nmap -sC -sV MACHINE_IP
```

**Наблюдаемые результаты (пример):**

* `22/tcp  open  ssh`
* `2222/tcp open  ssh`
* `31337/tcp open  ?` (nmap не смог точно распознать сервис)

Порт `31337` привлёк внимание, так как `nmap` вернул неопределённый сервис и список probe-ответов — стоит проверить вручную.

---

## Шаг 2 — Граббинг баннера (telnet)

Проверил порт 31337 напрямую, чтобы увидеть, что сервис отдает при подключении:

```bash
telnet MACHINE_IP 31337
```

**Пример полученного баннера (обязательно замените/сверьте с вашими логами):**

```
Connected to MACHINE_IP.
In case I forget - user:pass
ubuntu:Dafdas!!/str0ng

Connection closed by foreign host.
```

Из баннера были получены учётные данные `ubuntu:Dafdas!!/str0ng`.

---

## Шаг 3 — Подключение по SSH

Воспользовался найденными кредами для SSH-подключения:

```bash
ssh ubuntu@MACHINE_IP
# пароль: Dafdas!!/str0ng
```

После успешного входа проверил окружение и каталоги пользователя:

```bash
whoami
id
ls -la /usr
```

---

## Шаг 4 — Поиск флага

Для поиска флага выполнил быстрый поиск по типичным именам:

```bash
find / -type f -iname '*flag*' 2>/dev/null
# или
ls -la /usr | grep -i flag
```

Флаг обнаружен по пути: `/usr/flag.txt`
(флаг не публикую — отмечаю как `FLAG_FOUND`).

---

## Ключевые выводы

* `nmap` помог выявить интересный нестандартный порт (31337).
* Неопознанный сервис часто стоит исследовать вручную — баннер-граббинг через `telnet`/`nc` может раскрыть полезную информацию.
* Полученные креды сработали для SSH — быстрый переход к интерактивной сессии дал доступ к файловой системе и позволил найти флаг.

---

## Что было интересного / чему научился

* На CTF-ресурсе нестандартные порты часто содержат подсказки (баннеры, креды) — не ограничивайтесь только стандартными портами.
* Комбинация `nmap` + ручной баннер-граббинг — простой и эффективный подход для initial access в обучающей среде.